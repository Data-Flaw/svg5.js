"use strict";const e={CLOSE:1,CORNER:1,CENTER:2,_attrRegex:e=>new RegExp(`\\s${e}\\=\\"[^"]*\\"`,"g"),_initAlea:(e=Date.now())=>{function t(){let e=4022871197;return t=>{t=t.toString();for(let r=0;r<t.length;r++){e+=t.charCodeAt(r);let o=.02519603282416938*e;e=o>>>0,o-=e,o*=e,e=o>>>0,o-=e,e+=4294967296*o}return 2.3283064365386963e-10*(e>>>0)}}return new function(){return function(e){let r=0,o=0,n=0,a=1;0==e.length&&(e=[+new Date]);let i=t();r=i(" "),o=i(" "),n=i(" ");for(let t=0;t<e.length;t++)r-=i(e[t]),0>r&&(r+=1),o-=i(e[t]),0>o&&(o+=1),n-=i(e[t]),0>n&&(n+=1);i=null;const s=()=>{const e=2091639*r+2.3283064365386963e-10*a;return r=o,o=n,n=e-(a=0|e)};return s.uint32=()=>4294967296*s(),s.fract53=()=>s()+11102230246251565e-32*(0|2097152*s()),s.args=e,s}(Array.prototype.slice.call(arguments))}(e)},_initSimplexNoise:t=>{const r=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,n=1/6,a=(Math.sqrt(5)-1)/4,i=(5-Math.sqrt(5))/20;function s(t){const r=e._initAlea(t);this.p=l(r),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let e=0;512>e;e++)this.perm[e]=this.p[255&e],this.permMod12[e]=this.perm[e]%12}function l(e){var t,r=new Uint8Array(256);for(t=0;256>t;t++)r[t]=t;for(t=0;255>t;t++){var o=t+~~(e()*(256-t)),n=r[t];r[t]=r[o],r[o]=n}return r}return s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var n,a,i=this.permMod12,s=this.perm,l=this.grad3,d=0,_=0,h=0,p=(e+t)*r,u=Math.floor(e+p),$=Math.floor(t+p),c=(u+$)*o,g=e-(u-c),m=t-($-c);g>m?(n=1,a=0):(n=0,a=1);var f=g-n+o,y=m-a+o,v=g-1+2*o,x=m-1+2*o,M=255&u,b=255&$,w=.5-g*g-m*m;if(0<=w){var k=3*i[M+s[b]];d=(w*=w)*w*(l[k]*g+l[k+1]*m)}var C=.5-f*f-y*y;if(0<=C){var E=3*i[M+n+s[b+a]];_=(C*=C)*C*(l[E]*f+l[E+1]*y)}var R=.5-v*v-x*x;if(0<=R){var A=3*i[M+1+s[b+1]];h=(R*=R)*R*(l[A]*v+l[A+1]*x)}return 70*(d+_+h)},noise3D:function(e,t,r){var o,a,i,s,l,d,_,h,p,u,$=this.permMod12,c=this.perm,g=this.grad3,m=.3333333333333333*(e+t+r),f=Math.floor(e+m),y=Math.floor(t+m),v=Math.floor(r+m),x=(f+y+v)*n,M=e-(f-x),b=t-(y-x),w=r-(v-x);M>=b?b>=w?(l=1,d=0,_=0,h=1,p=1,u=0):M>=w?(l=1,d=0,_=0,h=1,p=0,u=1):(l=0,d=0,_=1,h=1,p=0,u=1):b<w?(l=0,d=0,_=1,h=0,p=1,u=1):M<w?(l=0,d=1,_=0,h=0,p=1,u=1):(l=0,d=1,_=0,h=1,p=1,u=0);var k=M-l+n,C=b-d+n,E=w-_+n,R=M-h+2*n,A=b-p+2*n,D=w-u+2*n,T=M-1+.5,S=b-1+.5,L=w-1+.5,j=255&f,N=255&y,U=255&v,O=.6-M*M-b*b-w*w;if(0>O)o=0;else{var P=3*$[j+c[N+c[U]]];o=(O*=O)*O*(g[P]*M+g[P+1]*b+g[P+2]*w)}var q=.6-k*k-C*C-E*E;if(0>q)a=0;else{var G=3*$[j+l+c[N+d+c[U+_]]];a=(q*=q)*q*(g[G]*k+g[G+1]*C+g[G+2]*E)}var I=.6-R*R-A*A-D*D;if(0>I)i=0;else{var V=3*$[j+h+c[N+p+c[U+u]]];i=(I*=I)*I*(g[V]*R+g[V+1]*A+g[V+2]*D)}var W=.6-T*T-S*S-L*L;if(0>W)s=0;else{var F=3*$[j+1+c[N+1+c[U+1]]];s=(W*=W)*W*(g[F]*T+g[F+1]*S+g[F+2]*L)}return 32*(o+a+i+s)},noise4D:function(e,t,r,o){var n,s,l,d,_,h,p,u,$,c,g,m,f,y,v,x,M,b=this.perm,w=this.grad4,k=(e+t+r+o)*a,C=Math.floor(e+k),E=Math.floor(t+k),R=Math.floor(r+k),A=Math.floor(o+k),D=(C+E+R+A)*i,T=e-(C-D),S=t-(E-D),L=r-(R-D),j=o-(A-D),N=0,U=0,O=0,P=0;T>S?N++:U++,T>L?N++:O++,T>j?N++:P++,S>L?U++:O++,S>j?U++:P++,L>j?O++:P++;var q=T-(h=3<=N?1:0)+i,G=S-(p=3<=U?1:0)+i,I=L-(u=3<=O?1:0)+i,V=j-($=3<=P?1:0)+i,W=T-(c=2<=N?1:0)+2*i,F=S-(g=2<=U?1:0)+2*i,B=L-(m=2<=O?1:0)+2*i,H=j-(f=2<=P?1:0)+2*i,J=T-(y=1<=N?1:0)+3*i,z=S-(v=1<=U?1:0)+3*i,Z=L-(x=1<=O?1:0)+3*i,Q=j-(M=1<=P?1:0)+3*i,K=T-1+4*i,X=S-1+4*i,Y=L-1+4*i,ee=j-1+4*i,te=255&C,re=255&E,oe=255&R,ne=255&A,ae=.6-T*T-S*S-L*L-j*j;if(0>ae)n=0;else{var ie=b[te+b[re+b[oe+b[ne]]]]%32*4;n=(ae*=ae)*ae*(w[ie]*T+w[ie+1]*S+w[ie+2]*L+w[ie+3]*j)}var se=.6-q*q-G*G-I*I-V*V;if(0>se)s=0;else{var le=b[te+h+b[re+p+b[oe+u+b[ne+$]]]]%32*4;s=(se*=se)*se*(w[le]*q+w[le+1]*G+w[le+2]*I+w[le+3]*V)}var de=.6-W*W-F*F-B*B-H*H;if(0>de)l=0;else{var _e=b[te+c+b[re+g+b[oe+m+b[ne+f]]]]%32*4;l=(de*=de)*de*(w[_e]*W+w[_e+1]*F+w[_e+2]*B+w[_e+3]*H)}var he=.6-J*J-z*z-Z*Z-Q*Q;if(0>he)d=0;else{var pe=b[te+y+b[re+v+b[oe+x+b[ne+M]]]]%32*4;d=(he*=he)*he*(w[pe]*J+w[pe+1]*z+w[pe+2]*Z+w[pe+3]*Q)}var ue=.6-K*K-X*X-Y*Y-ee*ee;if(0>ue)_=0;else{var $e=b[te+1+b[re+1+b[oe+1+b[ne+1]]]]%32*4;_=(ue*=ue)*ue*(w[$e]*K+w[$e+1]*X+w[$e+2]*Y+w[$e+3]*ee)}return 27*(n+s+l+d+_)}},s._buildPermutationTable=l,new s(t)},_addElement:(t,r)=>{e.html+=`<${t} stroke="${e._strokeColor}" stroke-width="${e._strokeWidth}" stroke-linecap="${e._strokeCap}" stroke-linejoin="${e._strokeJoin}"${e._strokeDashArray.length?` stroke-dasharray="${e._strokeDashArray.join(" ")}"`:""} fill="${e._fillColor}" ${r}${e._getTransform()}${1!==e._opacity?` opacity="${e._opacity}"`:""}${e._attributes} />`},_addTransform:t=>e._transform[e._transform.length-1].push(t),_getTransform:()=>e._transform[e._transform.length-1].length?` transform="${e._transform[e._transform.length-1].join(" ")}"`:"",_round:t=>void 0===e._precision?t:t.toFixed(e._precision),_parseColor:function(e,t,r,o){return"string"==typeof arguments[0]?arguments[0]:1===arguments.length?`rgb(${0|e}, ${0|e}, ${0|e})`:2===arguments.length?`rgba(${0|e}, ${0|e}, ${0|e}, ${(t/255).toFixed(3)})`:3===arguments.length?`rgb(${0|e}, ${0|t}, ${0|r})`:4===arguments.length?`rgba(${0|e}, ${0|t}, ${0|r}, ${(o/255).toFixed(3)})`:"black"}};e._prng=e._initAlea(),e._simplex=e._initSimplexNoise(e._prng),e.createSVG=(t=100,r=100,o)=>{e.width=t,e.height=r,e._name=o||`svg5_${Date.now()}`,e._id=e._name.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9_\-]+/g,"").replace(/\-\-+/g,"-"),e.html="",e._defs=[],e._attributes="",e._styles=[],e._fillColor="white",e._strokeColor="black",e._strokeWidth=1,e._strokeCap="butt",e._strokeJoin="miter",e._strokeDashArray=[],e._opacity=1,e._transform=[[]],e._path=[],e._rectMode=1,e._ellipseMode=2,e._precision=void 0},"undefined"!=typeof window&&(window.createSVG=(t,r,o)=>{e.createSVG(t,r,o),Object.keys(e).filter((e=>!e.startsWith("_"))).forEach((t=>window[t]=e[t]))}),e.getHTML=()=>`<svg id="${e._id}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e._round(e.width)} ${e._round(e.height)}" width="${e._round(e.width)}" height="${e._round(e.height)}">${e._styles.length?`<style>${e._styles.join(" ")}</style>`:""}${e._defs.length?`<defs>${e._defs.join(" ")}</defs>`:""}${e.html}</svg>`,e.render=(t="body",r=!0)=>{if(document.querySelector(t).innerHTML+=e.getHTML(),r){e._svg=document.querySelector(`#${e._id}`),e._svg.addEventListener("contextmenu",(t=>{t.preventDefault(),e.save()}),!1);let t=!0;e._svg.addEventListener("focus",(function(){t&&(this.addEventListener("keyup",(t=>{console.log(t.keyCode),t.preventDefault(),e.exportPNG()})),t=!1)}))}},e.precision=t=>e._precision=Math.max(0,~~t),e.addStyle=t=>e._styles.push("string"==typeof t?t:t.toString()),e.addDef=t=>e._defs.push("string"==typeof t?t:t.toString()),e.clear=()=>e.html="",e.background=(...t)=>e.html+=`<rect stroke="none" fill="${e._parseColor(...t)}" x="0" y="0" width="${e._round(e.width)}" height="${e._round(e.height)}" />`,e.opacity=t=>e._opacity=t,e.fill=(...t)=>e._fillColor=e._parseColor(...t),e.noFill=()=>e._fillColor="none",e.stroke=(...t)=>e._strokeColor=e._parseColor(...t),e.strokeWidth=t=>e._strokeWidth=t,e.strokeWeight=e.strokeWidth,e.strokeCap=t=>e._strokeCap=t,e.strokeJoin=t=>e._strokeJoin=t,e.strokeDashArray=(...t)=>e._strokeDashArray=t,e.noStroke=()=>e._strokeColor="none",e.setAttribute=(t,r)=>e._attributes.match(e._attrRegex(t))?e._attributes=e._attributes.replace(e._attrRegex(t),` ${t}="${r}"`):e._attributes+=` ${t}="${r}"`,e.removeAttribute=t=>e._attributes=e._attributes.replace(e._attrRegex(t),""),e.clearAttributes=()=>e._attributes="",e.ellipseMode=t=>e._ellipseMode=t,e.circle=(t,r,o)=>e._addElement("circle",`cx="${e._round(e._ellipseMode===e.CORNER?t+o/2:t)}" cy="${e._round(e._ellipseMode===e.CORNER?r+o/2:r)}" r="${e._round(o/2)}"`),e.ellipse=(t,r,o,n)=>e._addElement("ellipse",`cx="${e._round(e._ellipseMode===e.CORNER?t+o/2:t)}" cy="${e._round(e._ellipseMode===e.CORNER?r+n/2:r)}" rx="${e._round(o/2)}" ry="${e._round(n/2)}"`),e.rectMode=t=>e._rectMode=t,e.rect=(t,r,o,n,a,i)=>e._addElement("rect",`x="${e._round(e._rectMode===e.CENTER?t-o/2:t)}" y="${e._round(e._rectMode===e.CENTER?r-n/2:r)}" width="${e._round(o)}" height="${e._round(n)}"${void 0!==a?` rx="${e._round(a)}"`:""}${void 0!==i?` ry="${e._round(i)}"`:""}`),e.square=(t,r,o,n,a)=>e.rect(t,r,o,o,n,a),e.point=(t,r)=>e.rect(t,r,1,1),e.polyline=(...t)=>e._addElement("polyline",`points="${t.map(e._round).join(" ")}"`),e.line=(t,r,o,n)=>e._addElement("line",`x1="${e._round(t)}" y1="${e._round(r)}" x2="${e._round(o)}" y2="${e._round(n)}"`),e.polygon=(...t)=>e._addElement("polygon",`points="${t.map(e._round).join(" ")}"`),e.triangle=(t,r,o,n,a,i)=>e.polygon(t,r,o,n,a,i),e.quad=(t,r,o,n,a,i,s,l)=>e.polygon(t,r,o,n,a,i,s,l),e.regularPolygon=(t,r,o,n,a=0)=>{const i=new Array(o).fill(0).map(((i,s)=>{const l=s/o*Math.PI*2+e.radians(a);return`${t+Math.cos(l)*n},${r+Math.sin(l)*n}`}));e.polygon(...i)},e.arc=(t,r,o,n,a,i)=>{if(Math.abs(a-i)>=360)return e.ellipse(t,r,a,i);e._ellipseMode===e.CORNER&&(t+=o/2,r+=n/2);const s=e.radians(a),l=e.radians(i),d=e._round(o/2),_=e._round(n/2),h=e._round(t+Math.cos(s)*d),p=e._round(r+Math.sin(s)*_),u=e._round(t+Math.cos(l)*d),$=e._round(r+Math.sin(l)*_);e._addElement("path",`d="M ${h} ${p} A ${d} ${_} 0 ${Math.abs(i-a)>180?1:0} ${i<a?0:1} ${u} ${$}"`)},e.spline=(...t)=>{let r=1,o=!1;t.length%2==1?r=t.pop():"boolean"==typeof t[t.length-1]&&(o=t.pop(),r=t.pop()),t=t.reduce(((e,t,r)=>(e[r/2|0]||(e[r/2|0]={}),e[r/2|0][["x","y"][r%2]]=t,e)),[]);const n=[];for(let e=0;e<t.length-(o?0:1);e++){const{x:r,y:o}=t[e%t.length],{x:a,y:i}=t[(e+1)%t.length];n[e%t.length]={x:(r+a)/2,y:(o+i)/2}}const a=o?[]:[[t[0],t[0]]];for(let e=o?0:1;e<n.length;e++){const o=t[e],i=n[(n.length+e-1)%n.length],s=n[e],l=(i.x-s.x)/2,d=(i.y-s.y)/2;a[e]=[{x:o.x+r*l,y:o.y+r*d},{x:o.x-r*l,y:o.y-r*d}]}o||a.push([t[t.length-1],t[t.length-1]]),e._addElement("path",`d="M ${t[0].x},${t[0].y} ${n.map(((e,r)=>`C ${a[r][1].x}, ${a[r][1].y} ${a[(r+1)%t.length][0].x}, ${a[(r+1)%t.length][0].y} ${t[(r+1)%t.length].x}, ${t[(r+1)%t.length].y}`)).join(" ")}"`)},e.beginShape=()=>e._path=[],e.lineTo=(t,r)=>e._path.push(`L${e._round(t)},${e._round(r)}`),e.moveTo=(t,r)=>e._path.push(`M${e._round(t)},${e._round(r)}`),e.vertex=(t,r)=>0==e._path.length?e.moveTo(t,r):e.lineTo(t,r),e.bezierVertex=(t,r,o,n,a,i)=>e._path.push(`C ${e._round(t)} ${e._round(r)}, ${e._round(o)} ${e._round(n)}, ${e._round(a)} ${e._round(i)}`),e.cubicVertex=(t,r,o,n)=>e._path.push(`S ${e._round(t)} ${e._round(r)}, ${e._round(o)} ${e._round(n)}`),e.quadraticVertex=(t,r,o,n)=>e._path.push(`Q ${e._round(t)} ${e._round(r)}, ${e._round(o)} ${e._round(n)}`),e.arcVertex=(t,r,o,n,a,i,s)=>e._path.push(`A ${t} ${r} ${o} ${n} ${a} ${i} ${s}`),e.endShape=t=>e._addElement("path",`d="${e._path.join(" ")}${t?" Z":""}"`),e.beginPath=e.beginShape,e.endPath=e.endShape,e.PI=Math.PI,e.TAU=2*Math.PI,e.lerp=(e,t,r)=>e*(1-r)+t*r,e.norm=(e,t,r)=>(e-t)/(r-t),e.map=(t,r,o,n,a)=>e.lerp(n,a,e.norm(t,r,o)),e.constrain=(e,t,r)=>e<t?t:e>r?r:e,e.radians=t=>t/360*e.TAU,e.degrees=t=>t/e.TAU*360,e.randomSeed=t=>e._prng=e._initAlea(t),e.random=(t,r)=>void 0===t?e._prng():t.length?t[e._prng()*t.length|0]:r||0===r?t+e._prng()*(r-t):e._prng()*t,e.randInt=(t,r)=>0|e.random(t,r),e.randBool=(t=.5)=>e._prng()<t,e.expRand=(t,r,o=2)=>void 0===t?e._prng()**o:r||0===r?t+e._prng()**o*(r-t):e._prng()**o*t,e.noiseSeed=t=>e._simplex=e._initSimplexNoise(t),e.noise1D=t=>e._simplex.noise2D(t,0),e.noise2D=(t,r)=>e._simplex.noise2D(t,r),e.noise3D=(t,r,o)=>e._simplex.noise3D(t,r,o),e.noise4D=(t,r,o,n)=>e._simplex.noise4D(t,r,o,n),e.noise=function(){return e._simplex[`noise${e.constrain(arguments.length,1,4)}D`](...arguments)},e.beginGroup=()=>{e.html+=`<g${e._getTransform()}${e._attributes}${1!==e._opacity?` opacity="${e._opacity}"`:""}>`,e._transform.push([])},e.endGroup=()=>{e._transform.pop(),e.html+="</g>"},e.translate=(t,r)=>e._addTransform(`translate(${e._round(t)}, ${e._round(r)})`),e.rotate=t=>e._addTransform(`rotate(${e._round(t)})`),e.scale=(t,r)=>e._addTransform(r?`scale(${e._round(t)}, ${e._round(r)})`:`scale(${e._round(t)})`),e.push=e.beginGroup,e.pop=e.endGroup,e.save=()=>{const t=new Blob([e.getHTML()],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=`${e._name}.svg`,document.body.appendChild(o),o.click(),document.body.removeChild(o)},e.exportPNG=()=>{const t=new Image,r=document.createElement("canvas"),o=r.getContext("2d");r.width=t.width=e.width,r.height=t.height=e.height,t.onload=()=>{o.drawImage(t,0,0,e.width,e.height),URL.revokeObjectURL(a),r.toBlob((t=>{const r=document.createElement("a"),o=URL.createObjectURL(t);r.href=o,r.download=`${e._name}.png`,r.click()}))};const n=new Blob([e.getHTML()],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(n);t.src=a},module.exports=e;
